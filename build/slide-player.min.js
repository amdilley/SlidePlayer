/*! slide-player 2016-05-14 */
var SlidePlayer=function(a,b){this.slidesContainer=document.getElementById(b.containerId),this.slides=b.slides||[],this.events=[],this.currentTimeouts=[],this.initCallbacks=[],this.slideIndex=-1,new YT.Player(a.containerId,{width:a.width,height:a.height,videoId:a.videoId,events:{onReady:this.init.bind(this),onStateChange:this.onChange.bind(this)}})};SlidePlayer.prototype={at:function(a,b){var c={time:a,callback:b.bind(this)};return this.events.push(c),this},clearEvents:function(){this.currentTimeouts.forEach(clearTimeout)},goToSlide:function(a){var b=this.slides[a];b&&(this.loadSlide(this.slides[a]),this.slideIndex=a)},hide:function(){this.player.getIframe().style.display="none"},init:function(a){for(this.player=a.target,this.duration=this.player.getDuration();this.initCallbacks.length;)this.initCallbacks[0](),this.initCallbacks.shift();for(var b=0;b<this.events.length;b++)this.events[b].time=this.parseTime(this.events[b].time)},loadSlide:function(a){this.slidesContainer.innerHTML=a},nextSlide:function(){this.goToSlide(this.slideIndex+1)},onChange:function(a){switch(a.data){case YT.PlayerState.BUFFERING:this.onBuffer();break;case YT.PlayerState.PLAYING:this.onPlay();break;case YT.PlayerState.PAUSED:this.onPause();break;case YT.PlayerState.ENDED:this.onEnd();break;default:return}},onBuffer:function(){this.clearEvents()},onEnd:function(){},onPause:function(){this.clearEvents()},onPlay:function(){this.setEvents()},pause:function(){this.player.pauseVideo()},parseTime:function(a){if("end"===a)return 1e3*this.duration;var b=parseInt(a);return-1!==a.indexOf("%")?Math.round(this.duration*b*10):1e3*b},play:function(){this.player?this.player.playVideo():this.initCallbacks.push(this.play.bind(this))},prevSlide:function(){this.goToSlide(this.slideIndex-1)},setEvents:function(){var a=1e3*this.player.getCurrentTime();this.currentTimeouts=this.events.map(function(b){var c=b.time-a;return c>=0?setTimeout(b.callback,c):void 0})},show:function(){var a=this.player.getIframe();a.style.removeProperty?a.style.removeProperty("display"):a.style.removeAttribute("display")},stop:function(){this.player.stopVideo()}};